/*
Copyright (c) 2012 jqWidgets.
http://jqwidgets.com/license/
*/

(function(a){a.extend(a.jqx._jqxGrid.prototype,{selectrow:function(b){this._applyrowselection(b,true)},unselectrow:function(b){this._applyrowselection(b,false)},clearselection:function(){this.selectedrowindex=-1;for(i=0;i<this.selectedrowindexes.length;i++){this._raiseEvent(3,{rowindex:this.selectedrowindexes[i]})}this.selectedrowindexes=new Array();this._renderrows(this.virtualsizeinfo)},getselectedrowindex:function(){return this.selectedrowindex},getselectedrowindexes:function(){return this.selectedrowindexes},_applyrowselection:function(c,b,e){if(c==null){return false}var d=this.selectedrowindex;if(this.selectionmode=="singlerow"){if(b){this._raiseEvent(2,{rowindex:c})}else{this._raiseEvent(3,{rowindex:c})}this._raiseEvent(3,{rowindex:d});this.selectedrowindexes=new Array()}var f=this.selectedrowindexes.indexOf(c);if(b){this.selectedrowindex=c;if(this.selectedrowindexes.indexOf(c)==-1){this.selectedrowindexes.push(c);if(this.selectionmode!="singlerow"){this._raiseEvent(2,{rowindex:c})}}else{if(this.selectionmode=="multiplerows"){this.selectedrowindexes.splice(f,1);this._raiseEvent(3,{rowindex:this.selectedrowindex});this.selectedrowindex=this.selectedrowindexes.length>0?this.selectedrowindexes[this.selectedrowindexes.length-1]:-1}}}else{if(f>=0||this.selectionmode=="singlerow"){this.selectedrowindexes.splice(f,1);this._raiseEvent(3,{rowindex:this.selectedrowindex});this.selectedrowindex=-1}}if(e==undefined||e){this._renderrows(this.virtualsizeinfo)}return true},_clearhoverstyle:function(){if(undefined==this.hoveredrow||this.hoveredrow==-1){return}var b=this.table.find(".jqx-grid-cell-hover");if(b.length>0){b.removeClass(this.toTP("jqx-grid-cell-hover"))}this.hoveredrow=-1},_clearselectstyle:function(){var e=this.table[0].rows.length;for(i=0;i<e;i++){var d=this.table[0].rows[i];var b=d.cells.length;for(j=0;j<b;j++){var c=d.cells[j];a(c).removeClass(this.toTP("jqx-grid-cell-selected"));a(c).removeClass(this.toTP("jqx-grid-cell-hover"))}}},_selectrowwithmouse:function(d,b,h){var k=b.row;if(k==undefined){return}var e=b.index;var f=this.hittestinfo[e].visualrow;if(this.hittestinfo[e].details){return}var c=f.cells[0].className;if(k.group){return}if(this.selectionmode=="multiplerows"){var g=h.indexOf(k.boundindex)!=-1;if(g){this._selectrowwithstyle(d,f,false)}else{this._selectrowwithstyle(d,f,true)}}else{this._clearselectstyle();this._selectrowwithstyle(d,f,true)}},_selectrowwithstyle:function(e,g,b){var c=g.cells.length;var f=0;if(e.rowdetails&&e.showrowdetailscolumn){f=1}for(i=f;i<c;i++){var d=g.cells[i];if(b){a(d).removeClass(this.toTP("jqx-grid-cell-hover"));a(d).addClass(this.toTP("jqx-grid-cell-selected"))}else{a(d).removeClass(this.toTP("jqx-grid-cell-hover"));a(d).removeClass(this.toTP("jqx-grid-cell-selected"))}}},_handlemousemove:function(d,p){if(p.enablehover){if(p.disabled){return}if(this.vScrollInstance.isScrolling()||this.hScrollInstance.isScrolling()){return}var f=this.showheader?this.columnsheader.height()+2:0;var e=this._groupsheader()?this.groupsheader.height():0;var h=this.host.offset();var o=d.pageX-h.left;var m=d.pageY-f-h.top-e;var n=this._hittestrow(o,m);var q=n.row;var k=n.index;if(this.hoveredrow!=-1&&k!=-1&&this.hoveredrow==k){return}this._clearhoverstyle();if(k==-1||q==undefined){return}var c=this.hittestinfo[k].visualrow;if(c==null){return}if(this.hittestinfo[k].details){return}var b=0;if(p.rowdetails&&p.showrowdetailscolumn){b=1}var l=c.cells[b].className;if(q.group||l.indexOf("jqx-grid-cell-selected")!=-1){return}this.hoveredrow=k;for(i=b;i<c.cells.length;i++){var g=c.cells[i];a(g).addClass(this.toTP("jqx-grid-cell-hover"))}}}})})(jQuery);